<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markmap Customizer Avanzado</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Markmap Customizer Avanzado</h1>
        <button id="save-html-btn">Guardar como HTML</button>
    </header>

    <main class="container">
        <div class="panel">
            <h2>Editor Markdown</h2>
            <textarea id="markdown-input" rows="10">
# Markmap
## Funciona!
- Ahora sí
- Es más simple
## Personalizaciones
- **Colores**
  - Fondo
  - Enlaces
  - Texto
- **Diseño**
  - Espaciado
  - Expansión
- **Fuentes**
## Exportar
- Guardar como HTML
            </textarea>
        </div>

        <div class="panel" id="preview-panel">
            <h2>Vista Previa</h2>
            <svg id="markmap-preview"></svg>
        </div>

        <div class="panel" id="options-panel">
            <h2>Opciones de Personalización</h2>
            <div class="option-group">
                <label for="bgColor">Color de Fondo:</label>
                <input type="color" id="bgColor" value="#FFFFFF">
            </div>
            <div class="option-group">
                <label for="lineColor">Color de Líneas:</label>
                <input type="color" id="lineColor" value="#337ab7">
            </div>
            <div class="option-group">
                <label for="textColor">Color de Texto:</label>
                <input type="color" id="textColor" value="#333333">
            </div>
            <hr>
            <div class="option-group">
                <label for="fontFamily">Familia de Fuente:</label>
                <select id="fontFamily">
                    <option value="sans-serif">Sans-Serif</option>
                    <option value="serif">Serif</option>
                    <option value="monospace">Monospace</option>
                    <option value="cursive">Cursive</option>
                </select>
            </div>
            <div class="option-group">
                <label for="fontSize">Tamaño de Fuente (px):</label>
                <input type="number" id="fontSize" value="16" min="8" max="32">
            </div>
            <hr>
            <div class="option-group">
                <label for="spacingHorizontal">Espaciado Horizontal:</label>
                <input type="range" id="spacingHorizontal" min="5" max="200" value="80">
            </div>
            <div class="option-group">
                <label for="spacingVertical">Espaciado Vertical:</label>
                <input type="range" id="spacingVertical" min="5" max="100" value="20">
            </div>
            <div class="option-group">
                <label for="initialExpandLevel">Niveles expandidos:</label>
                <input type="number" id="initialExpandLevel" value="2" min="-1" max="10">
            </div>
            <div class="option-group">
                <label for="maxWidth">Ancho Máximo del Nodo (px):</label>
                <input type="number" id="maxWidth" value="0" min="0">
            </div>
            <div class="option-group">
                <label for="colorFreezeLevel">Nivel de Congelación de Color:</label>
                <input type="number" id="colorFreezeLevel" value="4" min="1">
            </div>
            <hr>
            <div class="option-group-inline">
                <input type="checkbox" id="enableAnimation" checked>
                <label for="enableAnimation">Animaciones</label>
            </div>
            <div class="option-group-inline">
                <input type="checkbox" id="enableZoom" checked>
                <label for="enableZoom">Zoom</label>
            </div>
            <div class="option-group-inline">
                <input type="checkbox" id="enablePan" checked>
                <label for="enablePan">Pan (Arrastrar)</label>
            </div>
        </div>
    </main>

    <!-- ======== SECCIÓN DE SCRIPT CORREGIDA Y FINAL ======== -->
    <!-- CAMBIO CRÍTICO: Añadimos D3.js ANTES de markmap-view -->
    <script src="https://cdn.jsdelivr.net/npm/d3@6"></script>
    <script src="https://cdn.jsdelivr.net/npm/markmap-view"></script>
    <!-- Nuestro script se ejecuta DESPUÉS, garantizando que todo está cargado -->
    <script src="script.js"></script>

</body>
</html>